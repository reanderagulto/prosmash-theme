{{"mdp-weare-carousel-1.css" | asset_url | stylesheet_tag }}

<div id="mdp-weare-{{ section.id }}" class="mdp mdp-container mdp-weare-carousel-1" style="{% unless section.settings.margin_top == blank %}margin-top: {{ section.settings.margin_top }}px;{% endunless %} {% unless section.settings.margin_bottom == blank %}margin-bottom: {{ section.settings.margin_bottom }}px;{% endunless %}">
  {% unless section.settings.title == blank and section.settings.subtitle == blank %}
  <div class="mdp-header">
    {% unless section.settings.title == blank %}
    <h2 class="mdp-title">{{ section.settings.title | escape }}</h2>
    {% endunless %}
    {% unless section.settings.subtitle == blank %}
    <div class="mdp-subtitle">{{ section.settings.subtitle | escape }}</div>
    {% endunless %}
  </div>
  {% endunless %}
  <div class="mdp-swiper-container"  data-slidesPerView="{{section.settings.slides_per_view}}" data-slidesPerView-md="{{section.settings.slides_per_view_md}}" data-slidesPerView-sm="{{section.settings.slides_per_view_sm}}" data-slidesPerView-xs="{{section.settings.slides_per_view_xs}}" data-spaceBetween="30" data-navigation="true">
    <div class="mdp-swiper-wrapper">
      {% for block in section.blocks %}  
      <div class="mdp-swiper-slide">
        {% case block.type %}
        {% when 'image_box' %}
        <div class="mdp-image-box {% if block.settings.inverted %}mdp-inverted{% endif %} {% if block.settings.horizontal %}mdp-horizontal{% endif %} {% if block.settings.reversed %}mdp-reversed{% endif %}" style="background-color: {{ block.settings.bg_color }};">
          {% unless block.settings.link == blank %}
          <a href="{{block.settings.link}}">
            {% endunless %}
            <div class="mdp-media">
              <div class="mdp-placeholder" style="padding-top: calc({{ section.settings.image_size | split: "_" | first | split: "x" | last }} / {{ section.settings.image_size | split: "x" | first }} * 100%);">
                <img class="mdp-image lazyload" data-src="{{block.settings.image | img_url : section.settings.image_size}}">
              </div>
            </div>
            <div class="mdp-data">
              <div class="mdp-header">
                <div class="mdp-title">
                  {{block.settings.title}}
                </div>
              </div>
              {% unless block.settings.content == blank %}
              <div class="mdp-content">
                {{block.settings.content}}
              </div>
              {% endunless %}
            </div>
            {% unless block.settings.link == blank %}
          </a>
          {% endunless %}
        </div>    
        {% endcase %}    
      </div>
      {% endfor %}
    </div>
    <div class="mdp-swiper-pagination"></div>
  </div>
</div>

{% schema %}
  {
    "name": "Carousel 1",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Heading",
        "default": "Features"
      },
	  {
        "type": "text",
        "id": "subtitle",
        "label": "Subheading"
      },
	  {
        "type": "range",
        "id": "slides_per_view",
        "label": "Slides per view",
        "default": 3,
        "min": 2,
        "max": 5,
        "step": 1
      },
	  {
        "type": "range",
        "id": "slides_per_view_md",
        "label": "Slides per view (middle device)",
        "default": 2,
        "min": 1,
        "max": 5,
        "step": 1
      },
	  {
        "type": "range",
        "id": "slides_per_view_sm",
        "label": "Slides per view (small device)",
        "default": 2,
        "min": 1,
        "max": 5,
        "step": 1
      },
	  {
        "type": "range",
        "id": "slides_per_view_xs",
        "label": "Slides per view (extra small device)",
        "default": 1,
        "min": 1,
        "max": 5,
        "step": 1
      },
      {
         "type": "text",
         "id": "image_size",
         "label": "Product size",
         "default": "270x370_crop_center",
         "info": "Set the image size: '600x600',\n '2048x',\n'original' or '370x370_crop_center'"
      },
      {
        "type": "text",
        "id": "margin_top",
        "label": "Margin top (px)"
      },
      {
        "type": "text",
        "id": "margin_bottom",
        "label": "Margin bottom (px)"
      } 
    ],
	"blocks": [
	  {
        "type": "image_box",
        "name": "Image box",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          },
          {
            "type": "text",
            "id": "title",
            "label": "Heading",
            "default": "Heading"
          },
          {
            "type": "richtext",
            "id": "content",
            "label": "Content"
          },
          {
            "type": "url",
            "id": "link",
            "label": "Link"
          },
          {
            "type": "color",
            "id": "bg_color",
            "label": "Background color"
          },
          {
            "type": "checkbox",
            "id": "inverted",
            "label": "Inverted",
            "default": false
          },
          {
            "type": "checkbox",
            "id": "reversed",
            "label": "Reversed",
            "default": false
          },
          {
            "type": "checkbox",
            "id": "horizontal",
            "label": "Horizontal",
            "default": false
          }
        ]
      }
	],
    "presets": [{
      "name": "Carousel",
      "category": "SectionHub: weare"
    }]
  }
{% endschema %}