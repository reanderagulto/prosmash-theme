{{ 'product-card-v2.css' | asset_url | stylesheet_tag }}
{{ "prosmash-global.css" | asset_url | stylesheet_tag }}
{{ 'slick.css' | asset_url | stylesheet_tag }}
{{ 'slick-theme.css' | asset_url | stylesheet_tag }}
<script src="{{ 'slick.min.js' | asset_url }}" defer></script>
{{ "prosmash-hp-banner.js" |  asset_url |  script_tag }}

<div class="bio-section">
    <div class="mdp-container">
        <div class="col-left">
          <div class="player-kit-cards-container">
            {% assign player_handles = "agustin-tapia,arturo-coello,ale-galan,federico-chingotto,franco-stupaczuk" | split: "," %}
            {% for handle in player_handles %}
              {% assign player_collection = collections[handle] %}
              {% render 'pro-player-card', collection: player_collection %}
            {% endfor %}
          </div>
          
        </div>
        <div class="col-right">
            <div class="player-details">
                <div class="player-name">{{ collection.title }}</div>
                <div class="player-desc">{{ collection.description }}</div>
            </div>

            {% assign player_handles = "agustin-tapia,arturo-coello,martita-ortega" | split: "," %}
            {% assign current_index = player_handles | index_of: collection.handle %}

            {% assign prev_index = current_index | minus: 1 %}
            {% assign next_index = current_index | plus: 1 %}

            {% assign prev_handle = player_handles[prev_index] %}
            {% assign next_handle = player_handles[next_index] %}

            <div class="nav-buttons">
                <button type="button" class="slick-prev"><img src="{{ "btn-prev.svg" | asset_url }}" alt="Previous"></button>
                <button type="button" class="slick-next"><img src="{{ "btn-next.svg" | asset_url }}" alt="Next"></button>
            </div>
        </div>
    </div>
</div>

{% assign preferred_products = collection.metafields.custom.player_preferred_set.value %}
{% assign product_count = 0 %}
<div class="player-preferred-set">
  <div class="mdp-container">
    <div class="section-title">{{ collection.title }}'s Preferred Set</div>
    <div class="collection-grid preferred-set-grid">
      {% for product in preferred_products %}
        <div class="product-item" style="display: none;">
          {% render 'prosmash-product-card-v2', product: product %}
        </div>
        {% assign product_count = product_count | plus: 1 %}
      {% endfor %}
    </div>
    {% if product_count > 8 %}
      <div class="load-more-wrapper">
        <button class="load-more" data-target=".preferred-set-grid">Load More</button>
      </div>
    {% endif %}
  </div>
</div>

{% assign look_products = collection.metafields.custom.shop_the_look.value %}
{% assign look_count = 0 %}
<div class="player-shop-the-look">
  <div class="mdp-container">
    <div class="section-title">Shop the look of {{ collection.title }}</div>
    <div class="collection-grid shop-look-grid">
      {% for product in look_products %}
        <div class="product-item" style="display: none;">
          {% render 'prosmash-product-card-v2', product: product %}
        </div>
        {% assign look_count = look_count | plus: 1 %}
      {% endfor %}
    </div>
    {% if look_count > 8 %}
      <div class="load-more-wrapper">
        <button class="load-more" data-target=".shop-look-grid">Load More</button>
      </div>
    {% endif %}
  </div>
</div>

{% section 'prosmash-hp-cta-section' %}
{% section 'prosmash-hp-blog-section' %}
{% section 'prosmash-video-section-1' %}



<style>
    .bio-section .mdp-container {
        display: flex;
        padding: 0px 64px 64px 0px;
        align-items: flex-end;
        gap: 80px;
        align-self: stretch;
    }
    .bio-section .mdp-container .col-right {
        max-width: 538px;
    }
    .bio-section .mdp-container .col-left {
        width: 100%;
    }
    .player-preferred-set .mdp-container {
        display: flex;
        padding: 0px 64px 64px 64px;
        flex-direction: column;
        align-items: flex-start;
        gap: 32px;
        align-self: stretch;
    }
    .player-preferred-set .section-title {
        color: var(--Primary-Black, #000);
        font-family: Lexend;
        font-size: 16px;
        font-style: normal;
        font-weight: 500;
        line-height: normal;
    }

    #CollectionProductGrid {
    max-width: 1342px;
    width: 100%;
    margin: 0 auto;
  }

  .collection-grid {
    display: flex;
    align-items: flex-start;
    gap: 40px;
    flex-wrap: wrap;
  }
  .player-shop-the-look {
    background: #F0F0F0;
}
.player-shop-the-look .mdp-container {
    display: flex;
    padding: 64px 64px 80px 64px;
    flex-direction: column;
    align-items: flex-start;
    gap: 32px;
    align-self: stretch;
}
.player-shop-the-look .section-title {
    color: var(--Primary-Black, #000);
    font-family: Lexend;
    font-size: 16px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
}

  button.load-more {
    color: var(--black);
    font-family: var(--font-lexend);
    font-size: 16px;
    font-style: normal;
    font-weight: 700;
    line-height: 100%; /* 16px */
    text-transform: uppercase;
    background: transparent;
    padding: 16px 40px;
    margin: 0;
    cursor: pointer;
    border: 0px;
    transition: 0.3s;
  }
  button.load-more:hover {
    background: #D9E0D5;
}
  .load-more-wrapper {
      margin: 56px 0 0;
      width: 100%;
      text-align: center;
  }
  @media (max-width: 1024px) {
    .collection-grid {
        justify-content: center;
    }
    .player-preferred-set .mdp-container,
    .player-shop-the-look .mdp-container {
        align-items: center;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    function initLoadMore(targetSelector, initialVisible = 8) {
      const grid = document.querySelector(targetSelector);
      if (!grid) return;

      const items = grid.querySelectorAll('.product-item');
      let visibleCount = 0;

      // Show initial items
      for (let i = 0; i < Math.min(initialVisible, items.length); i++) {
        items[i].style.display = '';
        visibleCount++;
      }

      const btn = document.querySelector(`.load-more[data-target="${targetSelector}"]`);
      if (!btn) return;

      btn.addEventListener('click', function () {
        let shown = 0;
        for (let i = visibleCount; i < items.length && shown < initialVisible; i++) {
          items[i].style.display = '';
          shown++;
          visibleCount++;
        }

        if (visibleCount >= items.length) {
          btn.parentElement.remove(); // Remove the button when done
        }
      });
    }

    initLoadMore('.preferred-set-grid');
    initLoadMore('.shop-look-grid');
  });



    $(document).ready(function () { 

   $('.player-kit-cards-container').slick({
      slidesToShow: 2,
      slidesToScroll: 1,
      infinite: true,
      centerMode: true,
      centerPadding: '0px',
      arrows: true,
      dots: false,
      responsive: [
        {
          breakpoint: 1025,
          settings: {
            slidesToShow: 2
          }
        },
        {
          breakpoint: 768,
          settings: {
            slidesToShow: 1
          }
        },
        {
          breakpoint: 480,
          settings: {
            slidesToShow: 1
          }
        }
      ]
    });
  });
</script>